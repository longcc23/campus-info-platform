# ğŸ—ï¸ CDC æ™ºæ±‡ä¸­å¿ƒ V3.0 - äº§å“æ¶æ„æ€»è§ˆ

**ç‰ˆæœ¬**ï¼šV3.0  
**æ—¥æœŸ**ï¼š2025å¹´12æœˆ  
**æ¶æ„ç†å¿µ**ï¼šä»"å•æœºç‰ˆè„šæœ¬å·¥å…·"è¿›åŒ–ä¸º"å‰å°ï¼ˆCç«¯ï¼‰+ ä¸­å°ï¼ˆBç«¯ï¼‰"çš„å®Œæ•´ SaaS æ¶æ„

---

## ğŸ“ æ¶æ„æ¦‚è§ˆ

### æ ¸å¿ƒç†å¿µï¼šHuman-in-the-Loopï¼ˆäººåœ¨å›è·¯ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Human-in-the-Loop                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   AI ç²—åŠ å·¥   â”‚ -> â”‚  äººå·¥å®¡æ ¸     â”‚ -> â”‚ å­¦ç”Ÿæ¶ˆè´¹  â”‚ â”‚
â”‚  â”‚  (æ¸…æ´—ã€æå–) â”‚    â”‚  (æŠŠå…³å‡†ç¡®)   â”‚    â”‚ (æŸ¥é˜…æ”¶è—) â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å·¥ä½œæµç¨‹**ï¼š
1. **AI è´Ÿè´£"ç²—åŠ å·¥"**ï¼šæ¸…æ´—ã€æå–ã€ç»“æ„åŒ–
2. **è€å¸ˆ/ç­å§”è´Ÿè´£"å®¡æ ¸ä¸å‘å¸ƒ"**ï¼šæŠŠå…³å‡†ç¡®æ€§ï¼Œäººå·¥æ ¡å¯¹
3. **å­¦ç”Ÿè´Ÿè´£"æ¶ˆè´¹"**ï¼šæŸ¥é˜…ã€æ”¶è—ã€æœç´¢

---

## ğŸ—ºï¸ å…¨å±€æ¶æ„å›¾

### ç³»ç»Ÿç»„æˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         CDC æ™ºæ±‡ä¸­å¿ƒ V3.0                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚      ç”¨æˆ·ç«¯ (Cç«¯)              â”‚    â”‚      ç®¡ç†ç«¯ (Bç«¯)              â”‚     â”‚
â”‚  â”‚    Mini Program               â”‚    â”‚    Web Dashboard             â”‚     â”‚
â”‚  â”‚    (å¾®ä¿¡å°ç¨‹åº)                â”‚    â”‚    (Web æµè§ˆå™¨)               â”‚     â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”‚
â”‚  â”‚  æŠ€æœ¯æ ˆ:                      â”‚    â”‚  æŠ€æœ¯æ ˆ:                      â”‚     â”‚
â”‚  â”‚  â€¢ Taro 4.x + React 18       â”‚    â”‚  â€¢ Next.js 14 + React 18     â”‚     â”‚
â”‚  â”‚  â€¢ TypeScript                â”‚    â”‚  â€¢ TypeScript                â”‚     â”‚
â”‚  â”‚  â€¢ SCSS + Tailwind           â”‚    â”‚  â€¢ Tailwind CSS              â”‚     â”‚
â”‚  â”‚  â€¢ å¾®ä¿¡å°ç¨‹åºç»„ä»¶              â”‚    â”‚  â€¢ Lucide React (å›¾æ ‡)       â”‚     â”‚
â”‚  â”‚                              â”‚    â”‚  â€¢ Shadcn/ui                â”‚     â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”‚
â”‚  â”‚  åŠŸèƒ½:                        â”‚    â”‚  åŠŸèƒ½:                        â”‚     â”‚
â”‚  â”‚  â€¢ ä¿¡æ¯æµè§ˆ                   â”‚    â”‚  â€¢ AI æ™ºèƒ½é‡‡é›†å°             â”‚     â”‚
â”‚  â”‚  â€¢ æœç´¢ç­›é€‰                   â”‚    â”‚  â€¢ å†…å®¹ç®¡ç† (CMS)            â”‚     â”‚
â”‚  â”‚  â€¢ æ”¶è—åŠŸèƒ½                   â”‚    â”‚  â€¢ æ•°æ®çœ‹æ¿                  â”‚     â”‚
â”‚  â”‚  â€¢ æµè§ˆå†å²                   â”‚    â”‚  â€¢ æƒé™ç®¡ç†                  â”‚     â”‚
â”‚  â”‚  â€¢ ä¸ªäººä¸­å¿ƒ                   â”‚    â”‚  â€¢ å®¡æ ¸å‘å¸ƒ                  â”‚     â”‚
â”‚  â”‚  â€¢ æ·»åŠ åˆ°æ—¥å†                 â”‚    â”‚                              â”‚     â”‚
â”‚  â”‚                              â”‚    â”‚                              â”‚     â”‚
â”‚  â”‚  ç”¨æˆ·: å­¦ç”Ÿ                   â”‚    â”‚  ç”¨æˆ·: è€å¸ˆ/ç­å§”              â”‚     â”‚
â”‚  â”‚  çŠ¶æ€: âœ… å·²å®ç°              â”‚    â”‚  çŠ¶æ€: âœ… å·²å®ç°              â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚           â†•                                      â†•                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚                    ç»Ÿä¸€æ•°æ®å±‚ (Supabase)                          â”‚     â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”‚
â”‚  â”‚  æ•°æ®åº“è¡¨:                                                        â”‚     â”‚
â”‚  â”‚  â€¢ events (æ´»åŠ¨è¡¨) - âœ… å·²å®ç°                                    â”‚     â”‚
â”‚  â”‚  â€¢ users (ç”¨æˆ·è¡¨) - âœ… å·²å®ç°                                     â”‚     â”‚
â”‚  â”‚  â€¢ favorites (æ”¶è—è¡¨) - âœ… å·²å®ç°                                 â”‚     â”‚
â”‚  â”‚  â€¢ view_history (æµè§ˆå†å²) - âœ… å·²å®ç°                            â”‚     â”‚
â”‚  â”‚  â€¢ admin_users (ç®¡ç†å‘˜è¡¨) - âœ… å·²å®ç°                             â”‚     â”‚
â”‚  â”‚  â€¢ audit_log (å®¡æ ¸æ—¥å¿—) - âœ… å·²å®ç°                               â”‚     â”‚
â”‚  â”‚                                                                  â”‚     â”‚
â”‚  â”‚  è®¤è¯æœåŠ¡:                                                        â”‚     â”‚
â”‚  â”‚  â€¢ Supabase Auth - âœ… å·²é›†æˆï¼ˆç®¡ç†åå°ä½¿ç”¨ï¼‰                      â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚           â†•                                      â†•                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚                  AI æœåŠ¡å±‚                                       â”‚     â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”‚
â”‚  â”‚  å½“å‰å®ç° (Python):                                              â”‚     â”‚
â”‚  â”‚  â€¢ ingest_multimodal.py - âœ… å·²å®ç°                              â”‚     â”‚
â”‚  â”‚    - æ–‡æœ¬è§£æ (GPT-4)                                            â”‚     â”‚
â”‚  â”‚    - URL è§£æ (BeautifulSoup + Jina Reader)                      â”‚     â”‚
â”‚  â”‚    - å›¾ç‰‡ OCR (pytesseract)                                      â”‚     â”‚
â”‚  â”‚                                                                  â”‚     â”‚
â”‚  â”‚  å·²è¿ç§» (TypeScript/Next.js):                                    â”‚     â”‚
â”‚  â”‚  â€¢ lib/ai/parser.ts - âœ… å·²å®ç°                                  â”‚     â”‚
â”‚  â”‚    - LangChain.js + DeepSeek API                                 â”‚     â”‚
â”‚  â”‚    - äº‘ OCR æœåŠ¡                                                 â”‚     â”‚
â”‚  â”‚    - cheerio/jsdom (HTML è§£æ)                                   â”‚     â”‚
â”‚  â”‚  â€¢ app/api/ai/parse/route.ts - âœ… å·²å®ç°                         â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“± ç”¨æˆ·ç«¯ (Mini Program) - å·²å®ç°

### æŠ€æœ¯æ ˆ

| æŠ€æœ¯ | ç‰ˆæœ¬ | è¯´æ˜ |
|------|------|------|
| **æ¡†æ¶** | Taro 4.x | è·¨å¹³å°å°ç¨‹åºæ¡†æ¶ |
| **UI æ¡†æ¶** | React 18 | ç»„ä»¶åº“ |
| **è¯­è¨€** | TypeScript | ç±»å‹å®‰å…¨ |
| **æ ·å¼** | SCSS + Tailwind CSS | ä½¿ç”¨ weapp-tailwindcss |
| **ç»„ä»¶** | Taro åŸç”Ÿç»„ä»¶ | View, Text, ScrollView ç­‰ |
| **å¹³å°** | å¾®ä¿¡å°ç¨‹åº | è¿è¡Œç¯å¢ƒ |
| **çŠ¶æ€ç®¡ç†** | React Hooks | useState, useEffect |

### æ ¸å¿ƒåŠŸèƒ½

#### âœ… å·²å®ç°åŠŸèƒ½

1. **é¦–é¡µä¿¡æ¯æµ** (`src/pages/index/`)
   - æ´»åŠ¨åˆ—è¡¨å±•ç¤º
   - å®æ—¶æœç´¢ï¼ˆæ ‡é¢˜ã€å…¬å¸ã€åœ°ç‚¹ç­‰ï¼‰
   - åˆ†ç±»ç­›é€‰ï¼ˆå…¨éƒ¨/å®ä¹ æ‹›è˜/è®²åº§æ´»åŠ¨ï¼‰
   - ä¸‹æ‹‰åˆ·æ–°
   - ä¿¡æ¯å¡ç‰‡å±•ç¤ºï¼ˆæ ‡é¢˜ã€ç±»å‹ã€æ—¶é—´ã€åœ°ç‚¹ã€æ‘˜è¦ï¼‰

2. **è¯¦æƒ…é¡µ** (`src/pages/index/index.tsx` - è¯¦æƒ…æ¨¡æ€æ¡†)
   - ç»“æ„åŒ–ä¿¡æ¯å±•ç¤º
   - åŸå§‹æ–‡æœ¬æŸ¥çœ‹
   - æ”¶è—åŠŸèƒ½
   - æ·»åŠ åˆ°æ—¥å†ï¼ˆå¾®ä¿¡ `addPhoneCalendar` APIï¼‰

3. **æ”¶è—åŠŸèƒ½** (`src/pages/favorites/`)
   - æ”¶è—åˆ—è¡¨å±•ç¤º
   - è¯¦æƒ…æŸ¥çœ‹
   - å–æ¶ˆæ”¶è—

4. **æµè§ˆå†å²** (`src/pages/history/`)
   - å†å²è®°å½•åˆ—è¡¨
   - æŒ‰æµè§ˆæ—¶é—´æ’åº
   - è¯¦æƒ…æŸ¥çœ‹

5. **ä¸ªäººä¸­å¿ƒ** (`src/pages/profile/`)
   - ç”¨æˆ·ä¿¡æ¯å±•ç¤º
   - å¿«é€Ÿå¯¼èˆªï¼ˆæ”¶è—ã€å†å²ï¼‰

6. **è‡ªå®šä¹‰ TabBar** (`src/custom-tab-bar/`)
   - é¦–é¡µ / æˆ‘çš„ åˆ‡æ¢
   - è‡ªå®šä¹‰æ ·å¼ï¼ˆå­—ä½“å¤§å° 32rpxï¼‰

### æ•°æ®äº¤äº’

#### æ•°æ®åº“è¿æ¥

```typescript
// src/utils/supabase-rest.ts
- getEvents()           // è·å–æ´»åŠ¨åˆ—è¡¨
- getEventById()        // è·å–æ´»åŠ¨è¯¦æƒ…
- getFavoriteStatus()   // è·å–æ”¶è—çŠ¶æ€
- toggleFavorite()      // åˆ‡æ¢æ”¶è—çŠ¶æ€
- getViewHistory()      // è·å–æµè§ˆå†å²
- recordViewHistory()   // è®°å½•æµè§ˆå†å²
```

#### è®¤è¯æ–¹å¼

- **å½“å‰å®ç°**ï¼šåŸºäº OpenID çš„ä¸´æ—¶å“ˆå¸Œè®¤è¯
- **ä½ç½®**ï¼š`src/services/auth.ts`

### é¡¹ç›®ç»“æ„

```
infor_platform/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”œâ”€â”€ index/          # é¦–é¡µ
â”‚   â”‚   â”œâ”€â”€ favorites/      # æ”¶è—é¡µ
â”‚   â”‚   â”œâ”€â”€ history/        # æµè§ˆå†å²
â”‚   â”‚   â””â”€â”€ profile/        # ä¸ªäººä¸­å¿ƒ
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â””â”€â”€ FavoriteButton/ # æ”¶è—æŒ‰é’®ç»„ä»¶
â”‚   â”œâ”€â”€ custom-tab-bar/     # è‡ªå®šä¹‰ TabBar
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ auth.ts         # è®¤è¯æœåŠ¡
â”‚   â”‚   â””â”€â”€ favorites.ts    # æ”¶è—æœåŠ¡
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”œâ”€â”€ supabase-rest.ts  # Supabase REST API
â”‚   â”‚   â”œâ”€â”€ ics-generator.ts  # æ—¥å†æ–‡ä»¶ç”Ÿæˆ
â”‚   â”‚   â””â”€â”€ system-info.ts    # ç³»ç»Ÿä¿¡æ¯
â”‚   â””â”€â”€ styles/
â”‚       â”œâ”€â”€ theme.scss       # ä¸»é¢˜å˜é‡
â”‚       â””â”€â”€ mixins.scss      # SCSS Mixins
â”œâ”€â”€ config/                  # Taro é…ç½®
â””â”€â”€ package.json
```

### ä¼˜åŒ–æ–¹å‘

- ğŸ”„ UI å¾®è°ƒï¼ˆæ ¹æ®ç”¨æˆ·åé¦ˆï¼‰
- ğŸ”„ æ€§èƒ½ä¼˜åŒ–
- ğŸ”„ çœŸæœºå…¼å®¹æ€§ä¿®å¤
- ğŸ”„ è¡¥å……åŠŸèƒ½ï¼ˆå¤åˆ¶é“¾æ¥ã€ä¿å­˜äºŒç»´ç ç­‰ï¼‰

---

## ğŸ–¥ï¸ ç®¡ç†ç«¯ (Web Dashboard) - å·²å®ç°

### æŠ€æœ¯æ ˆ

| æŠ€æœ¯ | ç‰ˆæœ¬ | è¯´æ˜ |
|------|------|------|
| **æ¡†æ¶** | Next.js 14 | React å…¨æ ˆæ¡†æ¶ï¼ˆApp Routerï¼‰ |
| **UI æ¡†æ¶** | React 18 | ç»„ä»¶åº“ |
| **è¯­è¨€** | TypeScript | ç±»å‹å®‰å…¨ |
| **æ ·å¼** | Tailwind CSS | å®ç”¨ä¼˜å…ˆçš„ CSS |
| **å›¾æ ‡** | Lucide React | å›¾æ ‡åº“ |
| **ç»„ä»¶** | Shadcn/ui | åŸºäº Radix UI |
| **å¹³å°** | Web æµè§ˆå™¨ | æ¡Œé¢ç«¯ä¼˜å…ˆ |
| **API** | Next.js API Routes | Serverless Functions |
| **AI è°ƒç”¨** | LangChain.js | Node.js ç‰ˆæœ¬ |
| **è®¤è¯** | Supabase Auth | ç™»å½•ä¸æƒé™ |

### æ ¸å¿ƒåŠŸèƒ½

#### ğŸ”² è®¡åˆ’å®ç°åŠŸèƒ½

1. **ç™»å½•ä¸æƒé™ç®¡ç†** (`app/(auth)/login/`)
   - é‚®ç®± + å¯†ç ç™»å½•
   - å°é—­å¼ç™»å½•ï¼ˆä¸å¼€æ”¾æ³¨å†Œï¼‰
   - è§’è‰²æƒé™ï¼ˆè¶…çº§ç®¡ç†å‘˜ / è¿è¥å‘˜ï¼‰
   - åŸºäº Supabase Auth

2. **AI æ™ºèƒ½é‡‡é›†å°** (`app/(dashboard)/ingest/`) â­ æ ¸å¿ƒåŠŸèƒ½
   - **å¤šæ¨¡æ€è¾“å…¥**ï¼š
     - æ–‡æœ¬è¾“å…¥ï¼ˆç²˜è´´å¾®ä¿¡èŠå¤©è®°å½•ï¼‰
     - URL è¾“å…¥ï¼ˆå…¬ä¼—å·é“¾æ¥ã€æ–‡æ¡£é“¾æ¥ï¼‰
     - å›¾ç‰‡ä¸Šä¼ ï¼ˆæµ·æŠ¥ï¼Œæ”¯æŒ OCRï¼‰
   - **AI é¢„å¤„ç†**ï¼š
     - è°ƒç”¨ LangChain.js + DeepSeek API
     - è‡ªåŠ¨æå–ï¼šæ ‡é¢˜ã€ç±»å‹ã€æ—¶é—´ã€åœ°ç‚¹ã€æ­£æ–‡ã€æ ‡ç­¾
   - **äººå·¥æ ¡å¯¹**ï¼š
     - å·¦å³åˆ†æ å¯¹æ¯”ï¼ˆåŸå§‹ç´ æ vs AI ç»“æœï¼‰
     - å­—æ®µç¼–è¾‘
     - å®æ—¶é¢„è§ˆ
   - **å‘å¸ƒæµç¨‹**ï¼š
     - ç¡®è®¤å‘å¸ƒ / ä¿å­˜è‰ç¨¿

3. **å†…å®¹ç®¡ç† (CMS)** (`app/(dashboard)/events/`)
   - **æ´»åŠ¨åˆ—è¡¨**ï¼š
     - çŠ¶æ€ç­›é€‰ï¼ˆå·²å‘å¸ƒ/è‰ç¨¿ç®±/å·²è¿‡æœŸ/å·²ä¸‹æ¶ï¼‰
     - æœç´¢åŠŸèƒ½ï¼ˆæ ‡é¢˜ã€ç±»å‹ã€æ—¶é—´èŒƒå›´ï¼‰
     - æ‰¹é‡æ“ä½œï¼ˆåˆ é™¤ã€å‘å¸ƒã€ä¸‹æ¶ï¼‰
     - ç½®é¡¶åŠŸèƒ½
   - **æ´»åŠ¨ç¼–è¾‘** (`app/(dashboard)/events/[id]/`)
     - è¡¨å•ç¼–è¾‘å™¨
     - å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼ˆå¯é€‰ï¼‰
     - å›¾ç‰‡ä¸Šä¼ 
     - å®æ—¶é¢„è§ˆ

4. **æ•°æ®çœ‹æ¿** (`app/(dashboard)/dashboard/`)
   - **æ ¸å¿ƒæŒ‡æ ‡**ï¼š
     - ä»Šæ—¥æ–°å¢æµè§ˆé‡ (PV)
     - ç´¯è®¡æ”¶è—æ•°
     - ä»Šæ—¥æ–°å¢æ´»åŠ¨æ•°
     - æ´»è·ƒç”¨æˆ·æ•°
   - **å›¾è¡¨å±•ç¤º**ï¼š
     - æŠ˜çº¿å›¾ï¼šæµè§ˆé‡è¶‹åŠ¿ï¼ˆ7å¤©/30å¤©ï¼‰
     - é¥¼å›¾ï¼šæ´»åŠ¨ç±»å‹åˆ†å¸ƒ
     - æŸ±çŠ¶å›¾ï¼šçƒ­é—¨æ´»åŠ¨æ’è¡Œ
   - **çƒ­åº¦æ’è¡Œ**ï¼š
     - æœ¬å‘¨æœ€å—å…³æ³¨çš„ Top 5 èŒä½/è®²åº§
   - **æ•°æ®å¯¼å‡º**ï¼š
     - Excel æŠ¥è¡¨
     - CSV æ•°æ®
     - PDF æŠ¥å‘Šï¼ˆå¯é€‰ï¼‰

### å‰ç«¯è®¾è®¡

#### è®¾è®¡é£æ ¼ï¼ˆåŸºäºæä¾›çš„ React ç¤ºä¾‹ä»£ç ï¼‰

- âœ… æ·±è‰²ä¾§è¾¹æ  (`slate-900`)
- âœ… ç™½è‰²ä¸»å†…å®¹åŒº
- âœ… ç°ä»£åŒ–å¡ç‰‡å¼å¸ƒå±€
- âœ… Lucide React å›¾æ ‡åº“
- âœ… åŒæ å¸ƒå±€ï¼ˆAI å‘å¸ƒå°ï¼‰
- âœ… è¡¨æ ¼å±•ç¤ºï¼ˆæ´»åŠ¨åˆ—è¡¨ï¼‰

#### ç»„ä»¶ç»“æ„

```
admin-console/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ layout/
â”‚   â”‚   â”œâ”€â”€ Sidebar.tsx      # ä¾§è¾¹æ å¯¼èˆª
â”‚   â”‚   â”œâ”€â”€ TopNav.tsx       # é¡¶éƒ¨å¯¼èˆªæ 
â”‚   â”‚   â””â”€â”€ NavItem.tsx      # å¯¼èˆªé¡¹ç»„ä»¶
â”‚   â”œâ”€â”€ dashboard/
â”‚   â”‚   â”œâ”€â”€ StatsCard.tsx    # æ•°æ®å¡ç‰‡
â”‚   â”‚   â””â”€â”€ ChartCard.tsx    # å›¾è¡¨å¡ç‰‡
â”‚   â”œâ”€â”€ ingest/
â”‚   â”‚   â”œâ”€â”€ IngestView.tsx   # AI å‘å¸ƒå°ä¸»è§†å›¾
â”‚   â”‚   â”œâ”€â”€ InputArea.tsx    # è¾“å…¥åŒºåŸŸ
â”‚   â”‚   â”œâ”€â”€ ReviewArea.tsx   # å®¡æ ¸åŒºåŸŸ
â”‚   â”‚   â””â”€â”€ AILogs.tsx       # AI å¤„ç†æ—¥å¿—
â”‚   â””â”€â”€ events/
â”‚       â”œâ”€â”€ EventList.tsx    # æ´»åŠ¨åˆ—è¡¨
â”‚       â”œâ”€â”€ EventTable.tsx   # è¡¨æ ¼ç»„ä»¶
â”‚       â””â”€â”€ EventEditor.tsx  # æ´»åŠ¨ç¼–è¾‘å™¨
```

### æ•°æ®äº¤äº’

#### API è·¯ç”±

```
app/api/
â”œâ”€â”€ auth/
â”‚   â””â”€â”€ login/route.ts       # ç™»å½• API
â”œâ”€â”€ ai/
â”‚   â””â”€â”€ parse/route.ts       # AI è§£æ API
â””â”€â”€ events/
    â”œâ”€â”€ route.ts             # GET/POST äº‹ä»¶åˆ—è¡¨
    â””â”€â”€ [id]/route.ts        # PUT/DELETE å•ä¸ªäº‹ä»¶
```

#### æ•°æ®åº“æ‰©å±•

éœ€è¦æ–°å¢çš„è¡¨ï¼š
- `admin_users` - ç®¡ç†å‘˜è¡¨
- `audit_log` - å®¡æ ¸æ—¥å¿—è¡¨

éœ€è¦æ‰©å±•çš„è¡¨ï¼š
- `events` - æ–°å¢å­—æ®µï¼š
  - `status` (draft/published/archived/expired)
  - `is_top` (boolean)
  - `published_at` (timestamp)
  - `published_by` (admin_user_id)

### é¡¹ç›®ä½ç½®

**æ–°å»ºç‹¬ç«‹é¡¹ç›®**ï¼š
```
admin-console/                # æ–°å»ºé¡¹ç›®ç›®å½•
â”œâ”€â”€ app/                     # Next.js App Router
â”œâ”€â”€ components/              # React ç»„ä»¶
â”œâ”€â”€ lib/                     # å·¥å…·åº“
â””â”€â”€ package.json
```

---

## ğŸ—„ï¸ æ•°æ®å±‚ (Supabase)

### æ•°æ®åº“è¡¨ç»“æ„

#### âœ… å·²å®ç°çš„è¡¨

1. **events** (æ´»åŠ¨è¡¨)
   ```sql
   - id (ä¸»é”®)
   - title (æ ‡é¢˜)
   - type (ç±»å‹: activity/lecture/recruit)
   - content (å†…å®¹)
   - key_info (JSON: æ—¶é—´ã€åœ°ç‚¹ã€æˆªæ­¢æ—¥æœŸç­‰)
   - source_group (æ¥æºç¾¤)
   - tags (æ ‡ç­¾æ•°ç»„)
   - created_at (åˆ›å»ºæ—¶é—´)
   - updated_at (æ›´æ–°æ—¶é—´)
   - image_url (å›¾ç‰‡ URL)
   - ... (å…¶ä»–å­—æ®µ)
   ```

2. **users** (ç”¨æˆ·è¡¨)
   ```sql
   - id (ä¸»é”®)
   - openid_hash (OpenID å“ˆå¸Œ)
   - nickname (æ˜µç§°)
   - avatar_url (å¤´åƒ URL)
   - created_at (åˆ›å»ºæ—¶é—´)
   ```

3. **favorites** (æ”¶è—è¡¨)
   ```sql
   - id (ä¸»é”®)
   - user_id (ç”¨æˆ· ID)
   - event_id (æ´»åŠ¨ ID)
   - created_at (åˆ›å»ºæ—¶é—´)
   ```

4. **view_history** (æµè§ˆå†å²è¡¨)
   ```sql
   - id (ä¸»é”®)
   - user_id (ç”¨æˆ· ID)
   - event_id (æ´»åŠ¨ ID)
   - viewed_at (æµè§ˆæ—¶é—´)
   ```

#### âœ… å·²åˆ›å»ºçš„è¡¨

1. **admin_users** (ç®¡ç†å‘˜è¡¨)
   ```sql
   - id (ä¸»é”®)
   - email (é‚®ç®±ï¼Œå”¯ä¸€)
   - password_hash (å¯†ç å“ˆå¸Œï¼Œç”± Supabase Auth ç®¡ç†)
   - role (è§’è‰²: super_admin/operator)
   - display_name (æ˜¾ç¤ºåç§°)
   - created_at (åˆ›å»ºæ—¶é—´)
   - last_login_at (æœ€åç™»å½•æ—¶é—´)
   - is_active (æ˜¯å¦æ¿€æ´»)
   ```

2. **audit_log** (å®¡æ ¸æ—¥å¿—è¡¨)
   ```sql
   - id (ä¸»é”®)
   - admin_user_id (ç®¡ç†å‘˜ ID)
   - action (æ“ä½œ: create/update/delete/publish/unpublish)
   - resource_type (èµ„æºç±»å‹: event)
   - resource_id (èµ„æº ID)
   - changes (å˜æ›´å†…å®¹ï¼ŒJSONB)
   - created_at (åˆ›å»ºæ—¶é—´)
   ```

#### âœ… å·²æ‰©å±•çš„è¡¨

1. **events è¡¨æ‰©å±•**
   ```sql
   ALTER TABLE events ADD COLUMN status TEXT DEFAULT 'draft';
   -- 'draft' | 'published' | 'archived' | 'expired'
   
   ALTER TABLE events ADD COLUMN is_top BOOLEAN DEFAULT false;
   
   ALTER TABLE events ADD COLUMN published_at TIMESTAMPTZ;
   
   ALTER TABLE events ADD COLUMN published_by BIGINT REFERENCES admin_users(id);
   ```

### æ•°æ®æµ

```
ç”¨æˆ·ç«¯ (å°ç¨‹åº)               ç®¡ç†ç«¯ (Web)                Supabase
    â”‚                            â”‚                           â”‚
    â”‚  GET /events               â”‚  GET /events              â”‚
    â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
    â”‚                            â”‚                           â”‚
    â”‚  POST /favorites           â”‚  POST /events             â”‚
    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> â”‚
    â”‚                            â”‚  (åˆ›å»ºè‰ç¨¿)                â”‚
    â”‚                            â”‚                           â”‚
    â”‚                            â”‚  PUT /events/:id          â”‚
    â”‚                            â”‚  (å‘å¸ƒ: status='published')â”‚
    â”‚                            â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> â”‚
    â”‚                            â”‚                           â”‚
    â”‚  (è½®è¯¢/WebSocket æ›´æ–°)      â”‚                           â”‚
    â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
```

---

## ğŸ¤– AI æœåŠ¡å±‚

### å½“å‰å®ç° (Python)

#### è„šæœ¬ä½ç½®
- `scripts/ingest_multimodal.py`

#### åŠŸèƒ½
- **æ–‡æœ¬è§£æ**ï¼šè°ƒç”¨ GPT-4 APIï¼Œæå–ç»“æ„åŒ–ä¿¡æ¯
- **URL è§£æ**ï¼š
  - ä½¿ç”¨ BeautifulSoup è§£æ HTML
  - ä½¿ç”¨ Jina Reader API è·å–ç½‘é¡µå†…å®¹
- **å›¾ç‰‡ OCR**ï¼šä½¿ç”¨ pytesseract è¯†åˆ«å›¾ç‰‡æ–‡å­—

#### è¿è¡Œæ–¹å¼
- æœ¬åœ° Python ç¯å¢ƒè¿è¡Œ
- æ‰‹åŠ¨æ‰§è¡Œè„šæœ¬
- ç»“æœå†™å…¥ Supabase

### è®¡åˆ’è¿ç§» (TypeScript/Next.js)

#### ä»£ç ä½ç½®
- `admin-console/lib/ai/parser.ts` - AI è§£æé€»è¾‘
- `admin-console/app/api/ai/parse/route.ts` - API è·¯ç”±

#### æŠ€æœ¯æ ˆè¿ç§»

| åŠŸèƒ½ | Python ç‰ˆæœ¬ | TypeScript ç‰ˆæœ¬ |
|------|------------|----------------|
| **LLM è°ƒç”¨** | `openai` åº“ | `LangChain.js` + `@langchain/openai` |
| **OCR** | `pytesseract` | äº‘æœåŠ¡ï¼ˆå¦‚ç™¾åº¦ OCR APIï¼‰æˆ–å®¢æˆ·ç«¯åº“ |
| **HTML è§£æ** | `beautifulsoup4` | `cheerio` æˆ– `jsdom` |
| **è¿è¡Œç¯å¢ƒ** | æœ¬åœ° Python | Serverless Functions |
| **éƒ¨ç½²** | æœ¬åœ°è¿è¡Œ | Vercel/Netlify è‡ªåŠ¨éƒ¨ç½² |

#### å·¥ä½œæµç¨‹

```
ç®¡ç†åå° (æµè§ˆå™¨)
    â”‚
    â”‚ 1. ç”¨æˆ·ç²˜è´´å†…å®¹
    â”‚
    â–¼
Next.js API Route (/api/ai/parse)
    â”‚
    â”‚ 2. åˆ¤æ–­è¾“å…¥ç±»å‹ (text/url/image)
    â”‚
    â”œâ”€> æ–‡æœ¬: parseText()
    â”‚   â””â”€> LangChain.js -> DeepSeek API
    â”‚
    â”œâ”€> URL: parseURL()
    â”‚   â”œâ”€> è·å–ç½‘é¡µå†…å®¹ (fetch)
    â”‚   â””â”€> LangChain.js -> DeepSeek API
    â”‚
    â””â”€> å›¾ç‰‡: parseImage()
        â”œâ”€> OCR (äº‘æœåŠ¡)
        â””â”€> LangChain.js -> DeepSeek API
    â”‚
    â”‚ 3. è¿”å›ç»“æ„åŒ–æ•°æ®
    â”‚
    â–¼
ç®¡ç†åå° (æµè§ˆå™¨æ˜¾ç¤ºç»“æœ)
```

---

## ğŸ”„ æ ¸å¿ƒå·¥ä½œæµ

### å®Œæ•´å†…å®¹å‘å¸ƒæµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è€å¸ˆ/ç­å§”    â”‚
â”‚ å‡†å¤‡é€šçŸ¥æ¶ˆæ¯ â”‚
â”‚ (æ–‡æœ¬/URL/å›¾ç‰‡)â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. æ‰“å¼€ç®¡ç†åå°      â”‚
â”‚    ç™»å½•ç³»ç»Ÿ          â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. è¿›å…¥ AI æ™ºèƒ½é‡‡é›†å° â”‚
â”‚    ç²˜è´´å†…å®¹åˆ°è¾“å…¥åŒº   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. ç‚¹å‡»"è¯†åˆ«"æŒ‰é’®    â”‚
â”‚    è°ƒç”¨ AI è§£æ API  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. AI è¿”å›ç»“æ„åŒ–æ•°æ® â”‚
â”‚    (æ ‡é¢˜/æ—¶é—´/åœ°ç‚¹ç­‰) â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. è€å¸ˆäººå·¥æ ¡å¯¹      â”‚
â”‚    - æ£€æŸ¥ AI ç»“æœ    â”‚
â”‚    - ä¿®æ­£é”™è¯¯å­—æ®µ    â”‚
â”‚    - ç¡®è®¤æ— è¯¯        â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 6. ç‚¹å‡»"å‘å¸ƒ"æŒ‰é’®    â”‚
â”‚    æ›´æ–° events è¡¨    â”‚
â”‚    status='published'â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 7. å°ç¨‹åºç«¯å®æ—¶æ›´æ–°  â”‚
â”‚    (è½®è¯¢/WebSocket)  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 8. å­¦ç”Ÿåˆ·æ–°å°ç¨‹åº    â”‚
â”‚    çœ‹åˆ°æ–°å†…å®¹        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸš€ éƒ¨ç½²æ–¹æ¡ˆ

### ç”¨æˆ·ç«¯ (å°ç¨‹åº)

- **å¹³å°**ï¼šå¾®ä¿¡å°ç¨‹åº
- **å‘å¸ƒ**ï¼šå¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸Šä¼ 
- **å®¡æ ¸**ï¼šå¾®ä¿¡å®˜æ–¹å®¡æ ¸
- **åŸŸåé…ç½®**ï¼šéœ€è¦åœ¨å¾®ä¿¡å…¬ä¼—å¹³å°é…ç½® `requeståˆæ³•åŸŸå`ï¼ˆSupabase API åŸŸåï¼‰

### ç®¡ç†ç«¯ (Web Dashboard)

- **å¹³å°**ï¼šVercel / Netlify
- **éƒ¨ç½²æ–¹å¼**ï¼š
  - è¿æ¥ GitHub ä»“åº“
  - è‡ªåŠ¨ CI/CD
  - è‡ªåŠ¨ HTTPS
  - å…¨çƒ CDN
- **ç¯å¢ƒå˜é‡**ï¼š
  - `NEXT_PUBLIC_SUPABASE_URL`
  - `NEXT_PUBLIC_SUPABASE_ANON_KEY`
  - `SUPABASE_SERVICE_ROLE_KEY`
  - `DEEPSEEK_API_KEY`
  - `OCR_API_KEY` (å¯é€‰)

### æ•°æ®å±‚

- **å¹³å°**ï¼šSupabase
- **æ•°æ®åº“**ï¼šPostgreSQL
- **è®¤è¯**ï¼šSupabase Auth
- **API**ï¼šREST API + Realtime (å¯é€‰)

---

## ğŸ” å®‰å…¨æ¶æ„

### ç”¨æˆ·ç«¯ (å°ç¨‹åº)

- **è®¤è¯**ï¼šåŸºäºå¾®ä¿¡ OpenID çš„ä¸´æ—¶å“ˆå¸Œ
- **API è®¿é—®**ï¼šä½¿ç”¨ Supabase Anon Key
- **æ•°æ®æƒé™**ï¼šåŸºäº RLS (Row Level Security)
  - ç”¨æˆ·åªèƒ½è®¿é—®å·²å‘å¸ƒçš„å†…å®¹ (`status='published'`)
  - ç”¨æˆ·åªèƒ½ç®¡ç†è‡ªå·±çš„æ”¶è—å’Œå†å²è®°å½•

### ç®¡ç†ç«¯ (Web Dashboard)

- **è®¤è¯**ï¼šSupabase Authï¼ˆé‚®ç®± + å¯†ç ï¼‰
- **API è®¿é—®**ï¼š
  - å®¢æˆ·ç«¯ï¼šä½¿ç”¨ Supabase Anon Key
  - æœåŠ¡ç«¯ï¼šä½¿ç”¨ Service Role Keyï¼ˆä»… API Routesï¼‰
- **æƒé™æ§åˆ¶**ï¼š
  - é¡µé¢çº§ï¼šä¸­é—´ä»¶æ‹¦æˆªæœªç™»å½•ç”¨æˆ·
  - æ“ä½œçº§ï¼šåŸºäº `admin_users.role` å­—æ®µ
  - æ•°æ®çº§ï¼šRLS ç­–ç•¥ï¼ˆç®¡ç†å‘˜å¯è®¿é—®æ‰€æœ‰æ•°æ®ï¼‰

### AI æœåŠ¡

- **API Key ç®¡ç†**ï¼šç¯å¢ƒå˜é‡ï¼Œä¸æš´éœ²åˆ°å®¢æˆ·ç«¯
- **Rate Limiting**ï¼šé˜²æ­¢ API æ»¥ç”¨
- **é”™è¯¯æ—¥å¿—**ï¼šä¸æ³„éœ²æ•æ„Ÿä¿¡æ¯

---

## ğŸ“Š æŠ€æœ¯é€‰å‹å¯¹æ¯”

### å‰ç«¯æ¡†æ¶

| ç‰¹æ€§ | å°ç¨‹åºç«¯ | ç®¡ç†åå° |
|------|---------|---------|
| **æ¡†æ¶** | Taro | Next.js |
| **åŸå› ** | å¾®ä¿¡å°ç¨‹åºé™åˆ¶ï¼Œå¿…é¡»ä½¿ç”¨ Taro | Web åº”ç”¨æ ‡å‡†æ–¹æ¡ˆï¼Œå…¨æ ˆèƒ½åŠ› |
| **UI åº“** | Taro ç»„ä»¶ | Shadcn/ui + HTML |
| **æ ·å¼** | SCSS + rpx | Tailwind CSS + px/rem |
| **å›¾æ ‡** | Emoji / å›¾ç‰‡ | Lucide React |

### AI æœåŠ¡

| ç‰¹æ€§ | Python ç‰ˆæœ¬ | TypeScript ç‰ˆæœ¬ |
|------|------------|----------------|
| **ç¯å¢ƒ** | æœ¬åœ° Python | Serverless Functions |
| **éƒ¨ç½²** | æ‰‹åŠ¨è¿è¡Œ | è‡ªåŠ¨éƒ¨ç½² |
| **ç”¨æˆ·** | éœ€è¦æŠ€æœ¯èƒŒæ™¯ | å›¾å½¢åŒ–ç•Œé¢ |
| **æ‰©å±•æ€§** | å•æœºè¿è¡Œ | æŒ‰éœ€æ‰©å±• |

---

## ğŸ“ˆ å¼€å‘è·¯çº¿å›¾

### Phase 1: åŸºç¡€æ¶æ„æ­å»º (Week 1-2)

- [x] å°ç¨‹åºç«¯åŠŸèƒ½å®Œå–„ï¼ˆå·²å®Œæˆï¼‰
- [ ] Next.js é¡¹ç›®åˆå§‹åŒ–
- [ ] Supabase é…ç½®
- [ ] ç™»å½•é¡µé¢
- [ ] åŸºç¡€å¸ƒå±€ï¼ˆSidebar + TopNavï¼‰

### Phase 2: AI åŠŸèƒ½ (Week 2-3)

- [ ] AI è§£ææœåŠ¡è¿ç§»ï¼ˆPython â†’ TypeScriptï¼‰
- [ ] API æ¥å£å¼€å‘ (`/api/ai/parse`)
- [ ] AI æ™ºèƒ½é‡‡é›†å°é¡µé¢
- [ ] æµ‹è¯•éªŒè¯

### Phase 3: å†…å®¹ç®¡ç† (Week 3-4)

- [ ] æ•°æ®åº“æ‰©å±•ï¼ˆadmin_users, audit_log, events å­—æ®µï¼‰
- [ ] äº‹ä»¶åˆ—è¡¨é¡µé¢
- [ ] äº‹ä»¶ç¼–è¾‘é¡µé¢
- [ ] å‘å¸ƒåŠŸèƒ½
- [ ] çŠ¶æ€ç®¡ç†

### Phase 4: æ•°æ®çœ‹æ¿ (Week 4-5)

- [ ] Dashboard é¡µé¢
- [ ] æ•°æ®ç»Ÿè®¡
- [ ] å›¾è¡¨å±•ç¤ºï¼ˆRechartsï¼‰
- [ ] å¯¼å‡ºåŠŸèƒ½

### Phase 5: æµ‹è¯•ä¸ä¼˜åŒ– (Week 5-6)

- [ ] åŠŸèƒ½æµ‹è¯•
- [ ] æƒé™æµ‹è¯•
- [ ] æ€§èƒ½ä¼˜åŒ–
- [ ] æ–‡æ¡£å®Œå–„

---

## âœ… æ¶æ„åŸåˆ™

### 1. åˆ†ç¦»å…³æ³¨ç‚¹

- **ç”¨æˆ·ç«¯**ï¼šä¸“æ³¨"æ¶ˆè´¹"åŠŸèƒ½ï¼Œä¿æŒè½»é‡
- **ç®¡ç†ç«¯**ï¼šä¸“æ³¨"ç”Ÿäº§"åŠŸèƒ½ï¼ŒåŠŸèƒ½å¼ºå¤§
- **æ•°æ®å±‚**ï¼šç»Ÿä¸€å­˜å‚¨ï¼Œå…±äº«æ•°æ®

### 2. æŠ€æœ¯æ ˆä¸€è‡´æ€§

- **å‰ç«¯**ï¼šç»Ÿä¸€ä½¿ç”¨ React ç”Ÿæ€ï¼ˆTaro/Next.jsï¼‰
- **è¯­è¨€**ï¼šç»Ÿä¸€ä½¿ç”¨ TypeScript
- **æ ·å¼**ï¼šTailwind CSSï¼ˆå°½å¯èƒ½ç»Ÿä¸€ï¼‰

### 3. å¯æ‰©å±•æ€§

- **å¤šå­¦æ ¡æ”¯æŒ**ï¼šæ•°æ®åº“è®¾è®¡æ”¯æŒ `school_id`
- **å¤šè¯­è¨€æ”¯æŒ**ï¼ši18n æ¡†æ¶é¢„ç•™
- **API å¼€æ”¾**ï¼šæœªæ¥å¯æ‰©å±• REST API ç»™ç¬¬ä¸‰æ–¹

### 4. å®‰å…¨æ€§

- **æœ€å°æƒé™åŸåˆ™**ï¼šRLS ç­–ç•¥ä¸¥æ ¼é™åˆ¶
- **å®¡è®¡æ—¥å¿—**ï¼šæ‰€æœ‰ç®¡ç†å‘˜æ“ä½œå¯è¿½è¸ª
- **API ä¿æŠ¤**ï¼šRate Limiting + è®¤è¯

---

**æ–‡æ¡£ç‰ˆæœ¬**ï¼šV3.1.0  
**æœ€åæ›´æ–°**ï¼š2025å¹´12æœˆ12æ—¥  
**ç»´æŠ¤è€…**ï¼šå¼€å‘å›¢é˜Ÿ


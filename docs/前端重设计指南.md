# å‰ç«¯é‡è®¾è®¡æŒ‡å—

## å½“å‰åŠŸèƒ½æ¦‚è§ˆ

### 1. é¦–é¡µ (src/pages/index/index.tsx)

#### æ ¸å¿ƒåŠŸèƒ½
- **æ´»åŠ¨åˆ—è¡¨å±•ç¤º** - æ˜¾ç¤ºæ‹›è˜å’Œæ´»åŠ¨ä¿¡æ¯
- **æœç´¢åŠŸèƒ½** - æœç´¢æ ‡é¢˜ã€å…¬å¸ã€åœ°ç‚¹ç­‰
- **åˆ†ç±»ç­›é€‰** - å…¨éƒ¨/å®ä¹ æ‹›è˜/è®²åº§æ´»åŠ¨
- **æ”¶è—åŠŸèƒ½** - ç‚¹å‡»â¤ï¸æ”¶è—/å–æ¶ˆæ”¶è—
- **è¯¦æƒ…é¡µ** - ç‚¹å‡»å¡ç‰‡æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯
- **æ·»åŠ åˆ°æ—¥å†** - æ´»åŠ¨å¯ä»¥æ·»åŠ åˆ°æ‰‹æœºæ—¥å†

#### æ•°æ®ç»“æ„
```typescript
interface FeedItem {
  id: number
  type: 'activity' | 'lecture' | 'recruit'  // ç±»å‹
  status: 'open' | 'urgent' | 'new'         // çŠ¶æ€
  title: string                              // æ ‡é¢˜
  organizer: string                          // ç»„ç»‡è€…
  sourceGroup: string                        // æ¥æºç¾¤
  publishTime: string                        // å‘å¸ƒæ—¶é—´
  tags: string[]                             // æ ‡ç­¾
  keyInfo: {                                 // å…³é”®ä¿¡æ¯
    date?: string
    time?: string
    location?: string
    deadline?: string
    company?: string
    position?: string
    education?: string
    link?: string
  }
  summary: string                            // æ‘˜è¦
  rawContent: string                         // åŸå§‹å†…å®¹
  isTop: boolean                             // æ˜¯å¦ç½®é¡¶
  isSaved: boolean                           // æ˜¯å¦æ”¶è—
  posterColor: string                        // æµ·æŠ¥é¢œè‰²
}
```

#### æ ¸å¿ƒæ–¹æ³•
```typescript
// åˆå§‹åŒ–ç”¨æˆ·
initUser()

// åŠ è½½æ´»åŠ¨æ•°æ®
loadEvents()

// åŠ è½½æ”¶è—çŠ¶æ€
loadFavoriteStatus()

// å¤„ç†ç‚¹å‡»äº‹ä»¶
handleItemClick(item: FeedItem)

// æ·»åŠ åˆ°æ—¥å†
handleAddToCalendar(item: FeedItem)

// è·å–è¿‡æ»¤åçš„æ•°æ®
getFilteredFeed()
```

#### çŠ¶æ€ç®¡ç†
```typescript
state = {
  activeFilter: 'all' | 'recruit' | 'activity',  // å½“å‰ç­›é€‰
  feed: FeedItem[],                               // æ´»åŠ¨åˆ—è¡¨
  selectedItem: FeedItem | null,                  // é€‰ä¸­çš„æ´»åŠ¨
  toast: string | null,                           // æç¤ºä¿¡æ¯
  userId: string | null,                          // ç”¨æˆ·ID
  favorites: FeedItem[],                          // æ”¶è—åˆ—è¡¨
  searchKeyword: string                           // æœç´¢å…³é”®è¯
}
```

---

### 2. ä¸ªäººä¸­å¿ƒ (src/pages/profile/index.tsx)

#### æ ¸å¿ƒåŠŸèƒ½
- **ç”¨æˆ·ä¿¡æ¯å±•ç¤º** - å¤´åƒã€ç”¨æˆ·åã€ID
- **æˆ‘çš„æ”¶è—** - è·³è½¬åˆ°æ”¶è—åˆ—è¡¨
- **æµè§ˆå†å²** - æŸ¥çœ‹æµè§ˆè®°å½•ï¼ˆå¾…å®ç°ï¼‰
- **è®¾ç½®** - åå¥½è®¾ç½®ï¼ˆå¾…å®ç°ï¼‰
- **å…³äº** - ç‰ˆæœ¬ä¿¡æ¯ï¼ˆå¾…å®ç°ï¼‰

#### æ•°æ®ç»“æ„
```typescript
state = {
  userId: string | null,        // ç”¨æˆ·ID
  favoritesCount: number,       // æ”¶è—æ•°é‡
  loading: boolean              // åŠ è½½çŠ¶æ€
}
```

#### æ ¸å¿ƒæ–¹æ³•
```typescript
// åŠ è½½ç”¨æˆ·ä¿¡æ¯
loadUserInfo()

// è·³è½¬åˆ°æ”¶è—é¡µ
handleNavigateToFavorites()
```

---

### 3. æ”¶è—åˆ—è¡¨ (src/pages/favorites/index.tsx)

#### æ ¸å¿ƒåŠŸèƒ½
- **æ”¶è—åˆ—è¡¨å±•ç¤º** - æ˜¾ç¤ºæ‰€æœ‰æ”¶è—çš„æ´»åŠ¨
- **ä¸‹æ‹‰åˆ·æ–°** - åˆ·æ–°æ”¶è—åˆ—è¡¨
- **å–æ¶ˆæ”¶è—** - ç‚¹å‡»â¤ï¸å–æ¶ˆæ”¶è—
- **ç©ºçŠ¶æ€** - æ²¡æœ‰æ”¶è—æ—¶çš„æç¤º

#### æ•°æ®ç»“æ„
```typescript
state = {
  favorites: FeedItem[],        // æ”¶è—åˆ—è¡¨
  loading: boolean,             // åŠ è½½çŠ¶æ€
  refreshing: boolean           // åˆ·æ–°çŠ¶æ€
}
```

---

### 4. æ”¶è—æŒ‰é’®ç»„ä»¶ (src/components/FavoriteButton)

#### æ ¸å¿ƒåŠŸèƒ½
- **æ˜¾ç¤ºæ”¶è—çŠ¶æ€** - å·²æ”¶è—ï¼ˆâ¤ï¸ï¼‰/ æœªæ”¶è—ï¼ˆğŸ¤ï¼‰
- **åˆ‡æ¢æ”¶è—çŠ¶æ€** - ç‚¹å‡»åˆ‡æ¢
- **ä¹è§‚æ›´æ–°** - ç«‹å³æ›´æ–°UIï¼Œåå°åŒæ­¥
- **åŠ è½½çŠ¶æ€** - é˜²æ­¢é‡å¤ç‚¹å‡»

#### Props
```typescript
interface FavoriteButtonProps {
  eventId: number                              // äº‹ä»¶ID
  initialFavorited?: boolean                   // åˆå§‹æ”¶è—çŠ¶æ€
  onToggle?: (isFavorited: boolean) => void   // çŠ¶æ€å˜åŒ–å›è°ƒ
  className?: string                           // è‡ªå®šä¹‰æ ·å¼
  large?: boolean                              // æ˜¯å¦å¤§å°ºå¯¸
}
```

---

## æ ¸å¿ƒæœåŠ¡

### 1. AuthService (src/services/auth.ts)

```typescript
// è·å–ç”¨æˆ·OpenID
getOpenID(): Promise<string>

// åˆ›å»ºæˆ–æ›´æ–°ç”¨æˆ·
createOrUpdateUser(openid: string): Promise<void>
```

### 2. FavoritesService (src/services/favorites.ts)

```typescript
// åˆ‡æ¢æ”¶è—çŠ¶æ€
toggleFavorite(eventId: number, shouldFavorite: boolean): Promise<boolean>

// è·å–æ”¶è—åˆ—è¡¨
getFavorites(): Promise<Event[]>

// è·å–æ”¶è—çŠ¶æ€ï¼ˆæ‰¹é‡ï¼‰
getFavoriteStatus(eventIds: number[]): Promise<Set<number>>

// æ£€æŸ¥æ˜¯å¦å·²æ”¶è—
isFavorited(eventId: number): Promise<boolean>
```

---

## è®¾è®¡å»ºè®®

### é…è‰²æ–¹æ¡ˆ
å½“å‰ä½¿ç”¨çš„é¢œè‰²ï¼š
- ä¸»è‰²ï¼š`#667eea` (ç´«è“è‰²)
- æ¸å˜ï¼š`#667eea` â†’ `#764ba2`
- èƒŒæ™¯ï¼š`#f3f4f6` (æµ…ç°)
- å¡ç‰‡ï¼š`#ffffff` (ç™½è‰²)
- æ–‡å­—ï¼š`#111827` (æ·±ç°)
- æ¬¡è¦æ–‡å­—ï¼š`#6b7280` (ä¸­ç°)

### å¸ƒå±€ç»“æ„

#### é¦–é¡µå¸ƒå±€
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Header (å›ºå®š)            â”‚
â”‚ - æ ‡é¢˜                   â”‚
â”‚ - æœç´¢æ¡†                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Filter Bar (å›ºå®š)        â”‚
â”‚ - å…¨éƒ¨/æ‹›è˜/æ´»åŠ¨         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Content (æ»šåŠ¨)           â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Card 1              â”‚ â”‚
â”‚ â”‚ - å½©è‰²é¡¶éƒ¨æ¡        â”‚ â”‚
â”‚ â”‚ - æ ‡é¢˜              â”‚ â”‚
â”‚ â”‚ - å…³é”®ä¿¡æ¯          â”‚ â”‚
â”‚ â”‚ - æ”¶è—æŒ‰é’®          â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Card 2              â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ä¸ªäººä¸­å¿ƒå¸ƒå±€
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Header (æ¸å˜èƒŒæ™¯)        â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”                 â”‚
â”‚ â”‚å¤´åƒ â”‚ ç”¨æˆ·å          â”‚
â”‚ â””â”€â”€â”€â”€â”€â”˜ ID              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Menu List               â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ğŸ¯ æˆ‘çš„æ”¶è—         â”‚ â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚ â”‚ ğŸ• æµè§ˆå†å²         â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ âš™ï¸ è®¾ç½®             â”‚ â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚ â”‚ â„¹ï¸ å…³äº             â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## é‡è®¾è®¡æ­¥éª¤

### æ–¹æ¡ˆ Aï¼šä¿ç•™åŠŸèƒ½ï¼Œåªæ”¹æ ·å¼

1. **ä¿®æ”¹é¢œè‰²ä¸»é¢˜**
   - æ›´æ–° `posterColor` é…è‰²
   - æ›´æ–°ä¸»è‰²è°ƒå’Œæ¸å˜
   - æ›´æ–°å¡ç‰‡æ ·å¼

2. **è°ƒæ•´å¸ƒå±€**
   - ä¿®æ”¹å¡ç‰‡åœ†è§’ã€é˜´å½±
   - è°ƒæ•´é—´è·å’Œpadding
   - ä¼˜åŒ–å­—ä½“å¤§å°å’Œè¡Œé«˜

3. **ä¼˜åŒ–äº¤äº’**
   - æ·»åŠ æ›´å¤šåŠ¨ç”»æ•ˆæœ
   - ä¼˜åŒ–æŒ‰é’®åé¦ˆ
   - æ”¹è¿›åŠ è½½çŠ¶æ€

### æ–¹æ¡ˆ Bï¼šé‡æ„UIç»„ä»¶

1. **åˆ›å»ºæ–°çš„è®¾è®¡ç³»ç»Ÿ**
   ```
   src/
   â”œâ”€â”€ design-system/
   â”‚   â”œâ”€â”€ colors.ts        # é¢œè‰²å®šä¹‰
   â”‚   â”œâ”€â”€ typography.ts    # å­—ä½“å®šä¹‰
   â”‚   â”œâ”€â”€ spacing.ts       # é—´è·å®šä¹‰
   â”‚   â””â”€â”€ components/      # åŸºç¡€ç»„ä»¶
   â”‚       â”œâ”€â”€ Card.tsx
   â”‚       â”œâ”€â”€ Button.tsx
   â”‚       â””â”€â”€ Badge.tsx
   ```

2. **é‡æ„é¡µé¢ç»„ä»¶**
   - ä½¿ç”¨æ–°çš„è®¾è®¡ç³»ç»Ÿ
   - ä¿ç•™åŸæœ‰çš„æ•°æ®ç»“æ„å’Œæ–¹æ³•
   - åªä¿®æ”¹ render éƒ¨åˆ†

3. **æ¸è¿›å¼è¿ç§»**
   - å…ˆè¿ç§»ä¸€ä¸ªé¡µé¢
   - æµ‹è¯•åŠŸèƒ½æ˜¯å¦æ­£å¸¸
   - å†è¿ç§»å…¶ä»–é¡µé¢

---

## éœ€è¦ä¿ç•™çš„æ ¸å¿ƒé€»è¾‘

### âœ… å¿…é¡»ä¿ç•™
1. **æ•°æ®åŠ è½½é€»è¾‘** - `loadEvents()`, `loadFavorites()`
2. **æ”¶è—åŠŸèƒ½** - `FavoritesService` çš„æ‰€æœ‰æ–¹æ³•
3. **ç”¨æˆ·è®¤è¯** - `AuthService` çš„æ‰€æœ‰æ–¹æ³•
4. **çŠ¶æ€ç®¡ç†** - æ‰€æœ‰çš„ state å’Œ setState
5. **ç”Ÿå‘½å‘¨æœŸ** - `componentDidMount`, `componentDidShow`
6. **äº‹ä»¶å¤„ç†** - æ‰€æœ‰çš„ `handle*` æ–¹æ³•

### âš ï¸ å¯ä»¥ä¿®æ”¹
1. **æ ·å¼ä»£ç ** - æ‰€æœ‰çš„ `style` å’Œ `className`
2. **å¸ƒå±€ç»“æ„** - `View` çš„åµŒå¥—ç»“æ„
3. **è§†è§‰å…ƒç´ ** - é¢œè‰²ã€å­—ä½“ã€å›¾æ ‡
4. **åŠ¨ç”»æ•ˆæœ** - transition, animation

### âŒ ä¸è¦ä¿®æ”¹
1. **Service å±‚** - `src/services/` ä¸‹çš„æ‰€æœ‰æ–‡ä»¶
2. **Utils å±‚** - `src/utils/` ä¸‹çš„æ‰€æœ‰æ–‡ä»¶
3. **æ•°æ®ç»“æ„** - `FeedItem`, `KeyInfo` ç­‰æ¥å£å®šä¹‰

---

## å¿«é€Ÿå¼€å§‹é‡è®¾è®¡

### æ­¥éª¤ 1ï¼šåˆ›å»ºè®¾è®¡ç¨¿
1. ä½¿ç”¨ Figma/Sketch è®¾è®¡æ–°ç•Œé¢
2. ç¡®å®šæ–°çš„é…è‰²æ–¹æ¡ˆ
3. è®¾è®¡å¡ç‰‡æ ·å¼å’Œå¸ƒå±€

### æ­¥éª¤ 2ï¼šæå–è®¾è®¡ Token
```typescript
// src/design-system/tokens.ts
export const colors = {
  primary: '#your-color',
  secondary: '#your-color',
  background: '#your-color',
  // ...
}

export const spacing = {
  xs: '4px',
  sm: '8px',
  md: '16px',
  lg: '24px',
  xl: '32px'
}

export const typography = {
  h1: { fontSize: '28px', fontWeight: 'bold' },
  h2: { fontSize: '24px', fontWeight: 'bold' },
  body: { fontSize: '16px', fontWeight: 'normal' },
  // ...
}
```

### æ­¥éª¤ 3ï¼šé‡æ„é¡µé¢
1. ä¿ç•™åŸæœ‰çš„ class ç»“æ„å’Œæ–¹æ³•
2. åªä¿®æ”¹ `render()` æ–¹æ³•ä¸­çš„ JSX
3. ä½¿ç”¨æ–°çš„è®¾è®¡ Token
4. æµ‹è¯•åŠŸèƒ½æ˜¯å¦æ­£å¸¸

---

## ç¤ºä¾‹ï¼šé‡è®¾è®¡é¦–é¡µå¡ç‰‡

### åŸå§‹ä»£ç ï¼ˆåŠŸèƒ½é€»è¾‘ï¼‰
```typescript
// ä¿ç•™è¿™éƒ¨åˆ†
handleItemClick = async (item: FeedItem) => {
  this.setState({ selectedItem: item })
  if (userId) {
    await recordViewHistory(userId, item.id)
  }
}
```

### æ–°è®¾è®¡ï¼ˆåªæ”¹UIï¼‰
```typescript
// ä¿®æ”¹è¿™éƒ¨åˆ†
<View 
  onClick={() => this.handleItemClick(item)}
  style={{
    // ä½¿ç”¨æ–°çš„è®¾è®¡ Token
    backgroundColor: colors.cardBackground,
    borderRadius: spacing.lg,
    padding: spacing.md,
    marginBottom: spacing.sm,
    boxShadow: '0 4px 12px rgba(0,0,0,0.08)',
    // æ·»åŠ æ–°çš„è§†è§‰æ•ˆæœ
    border: '1px solid rgba(0,0,0,0.05)',
    transition: 'all 0.3s ease'
  }}
>
  {/* æ–°çš„å¡ç‰‡å†…å®¹å¸ƒå±€ */}
</View>
```

---

## éœ€è¦æˆ‘å¸®ä½ åšä»€ä¹ˆï¼Ÿ

1. **åˆ›å»ºè®¾è®¡ç³»ç»Ÿ** - æˆ‘å¯ä»¥å¸®ä½ åˆ›å»ºä¸€å¥—å®Œæ•´çš„è®¾è®¡ Token
2. **é‡æ„ç‰¹å®šé¡µé¢** - å‘Šè¯‰æˆ‘ä½ æƒ³å…ˆé‡è®¾è®¡å“ªä¸ªé¡µé¢
3. **æä¾›è®¾è®¡å»ºè®®** - æˆ‘å¯ä»¥æä¾›ä¸€äº›ç°ä»£åŒ–çš„è®¾è®¡æ–¹æ¡ˆ
4. **ä¿ç•™åŠŸèƒ½è¿ç§»** - å¸®ä½ æŠŠåŠŸèƒ½é€»è¾‘è¿ç§»åˆ°æ–°è®¾è®¡ä¸­

è¯·å‘Šè¯‰æˆ‘ä½ æƒ³è¦ï¼š
- **æ–¹æ¡ˆ A**ï¼šåªæ”¹æ ·å¼ï¼Œå¿«é€Ÿä¼˜åŒ–
- **æ–¹æ¡ˆ B**ï¼šå®Œå…¨é‡è®¾è®¡ï¼Œåˆ›å»ºæ–°çš„è®¾è®¡ç³»ç»Ÿ
- **æ–¹æ¡ˆ C**ï¼šå…¶ä»–æƒ³æ³•

æˆ–è€…ç›´æ¥å‘Šè¯‰æˆ‘ä½ çš„è®¾è®¡æƒ³æ³•ï¼Œæˆ‘æ¥å¸®ä½ å®ç°ï¼
